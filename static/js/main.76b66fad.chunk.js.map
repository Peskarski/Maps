{"version":3,"sources":["components/GoogleMap/Marker/Marker.tsx","components/GoogleMap/Marker/pics/Marker.png","components/GoogleMap/GoogleMap.tsx","components/GoogleMap/utils.ts","components/ItemsList/utils.ts","components/ItemsList/ItemsList.tsx","App.tsx","index.tsx","components/ItemsList/ItemsList.module.css","App.module.css","components/GoogleMap/Marker/Marker.module.css","components/GoogleMap/GoogleMap.module.css"],"names":["Marker","avatar","text","isActive","content","trigger","src","alt","className","styles","activeMarker","marker","DEFAULT_CENTER","lat","lng","DEFAULT_SIZE","width","height","GoogleMap","markers","currentPosition","setListOnBoundsChanged","useState","isFilterOnBoundsChangeEnabled","setIsFilterOnBoundsChangeEnabled","zoom","setZoom","center","setCenter","mapSize","setMapSize","useEffect","bounds","list","latArray","map","lngArray","sw","Math","min","ne","max","getCoordinatesForFitBounds","fitBounds","checked","onChange","e","target","bootstrapURLKeys","key","process","defaultCenter","defaultZoom","size","markersOnMap","robots","filter","isPointInsideBounds","markerImg","id","first_name","last_name","deg2rad","deg","PI","getDistanceFromLatLonInKm","lat1","lon1","lat2","lon2","dLat","dLon","a","sin","cos","d","atan2","sqrt","round","ItemsList","setMarkersOnListChange","setActiveMarkerOnHover","renderedList","setRenderedList","currentPage","setCurrentPage","changeMarkersAfterListChanged","listPartWithDistances","slice","item","distance","defaultCurrent","current","total","length","pageSize","showSizeChanger","itemLayout","dataSource","renderItem","Item","onMouseOver","onMouseLeave","Meta","info","name","App","Header","Layout","Sider","Content","setList","setMarkers","setCurrentPosition","setActiveMarker","gotPositionSuccessfully","pos","coords","latitude","longitude","navigator","geolocation","getCurrentPosition","layout","header","sider","theme","ReactDOM","render","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.76b66fad.chunk.js","sourcesContent":["import React from 'react';\nimport { Popover } from 'antd';\nimport { MarkerType } from './types';\nimport styles from './Marker.module.css';\n\nexport const Marker: React.FC<MarkerType> = ({ avatar, text, isActive }) => {\n  return (\n    <div>\n      <Popover content={text} trigger=\"click\">\n        <img src={avatar} alt=\"avatar\" className={isActive ? styles.activeMarker : styles.marker} />\n      </Popover>\n    </div>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/Marker.2a302402.png\";","import React, { useState, useEffect } from 'react';\nimport GoogleMapReact, { fitBounds } from 'google-map-react';\nimport { Checkbox } from 'antd';\nimport { MapInterface, Bounds, Size } from './types';\nimport { Marker } from './Marker';\nimport styles from './GoogleMap.module.css';\nimport robots from '../../MOCK_DATA.json';\nimport markerImg from './Marker/pics/Marker.png';\nimport { isPointInsideBounds, getCoordinatesForFitBounds } from './utils';\n\nconst textOnCheckbox = 'Apply filter on bounds change';\nconst DEFAULT_CENTER = { lat: 53.893009, lng: 27.567444 };\nconst DEFAULT_ZOOM = 4;\nconst DEFAULT_SIZE = { width: 1315, height: 800 };\n\nexport const GoogleMap: React.FC<MapInterface> = ({\n  markers,\n  currentPosition,\n  setListOnBoundsChanged,\n  activeMarker,\n}) => {\n  const [isFilterOnBoundsChangeEnabled, setIsFilterOnBoundsChangeEnabled] = useState(true);\n  const [zoom, setZoom] = useState(DEFAULT_ZOOM);\n  const [center, setCenter] = useState(DEFAULT_CENTER);\n  const [mapSize, setMapSize] = useState(DEFAULT_SIZE);\n\n  const handleBoundsChange = ({ bounds, zoom, size }: { bounds: Bounds; zoom: number; size: Size }) => {\n    setZoom(zoom);\n    setMapSize(size);\n    if (isFilterOnBoundsChangeEnabled) {\n      const markersOnMap = robots.filter(({ lat, lng }) => isPointInsideBounds({ lat, lng }, bounds));\n      setListOnBoundsChanged(markersOnMap);\n    }\n  };\n\n  useEffect(() => {\n    if (!isFilterOnBoundsChangeEnabled) {\n      const bounds = getCoordinatesForFitBounds(markers);\n      const { zoom, center } = fitBounds(bounds, mapSize);\n      setZoom(zoom);\n      setCenter(center);\n    }\n  }, [markers, isFilterOnBoundsChangeEnabled]);\n\n  return (\n    <div className={styles.map}>\n      <Checkbox\n        checked={isFilterOnBoundsChangeEnabled}\n        onChange={(e) => {\n          setIsFilterOnBoundsChangeEnabled(e.target.checked);\n        }}\n      >\n        {textOnCheckbox}\n      </Checkbox>\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: `${process.env.REACT_APP_API_KEY}` }}\n        defaultCenter={DEFAULT_CENTER}\n        defaultZoom={5}\n        zoom={zoom}\n        center={center}\n        onChange={handleBoundsChange}\n      >\n        {currentPosition && <Marker lat={currentPosition.lat} lng={currentPosition.lng} avatar={markerImg} />}\n        {markers.map(({ id, lat, lng, avatar, first_name, last_name }) => (\n          <Marker\n            lat={lat}\n            lng={lng}\n            key={id}\n            avatar={avatar}\n            text={`${first_name} ${last_name}`}\n            isActive={activeMarker === id}\n          />\n        ))}\n      </GoogleMapReact>\n    </div>\n  );\n};\n","import { Coordinates, Bounds } from './types';\nimport { ListItem } from '../ItemsList/types';\n\nexport const isPointInsideBounds = ({ lat, lng }: Coordinates, { ne, sw }: Bounds) =>\n  lat > sw.lat && lat < ne.lat && lng > sw.lng && lng < ne.lng;\n\nexport const getCoordinatesForFitBounds = (list: ListItem[]) => {\n  const latArray = list.map(({ lat }) => lat);\n  const lngArray = list.map(({ lng }) => lng);\n  const sw = {\n    lat: Math.min(...latArray),\n    lng: Math.min(...lngArray),\n  };\n  const ne = {\n    lat: Math.max(...latArray),\n    lng: Math.max(...lngArray),\n  };\n\n  return { ne, sw };\n};\n","import { ListItem } from './types';\n\nconst deg2rad = (deg: number) => {\n  return deg * (Math.PI / 180);\n};\n\nexport const getDistanceFromLatLonInKm = (lat1: number, lon1: number, lat2: number, lon2: number) => {\n  const R = 6371; // Radius of the earth in km\n  const dLat = deg2rad(lat2 - lat1);\n  const dLon = deg2rad(lon2 - lon1);\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  const d = R * c; // Distance in km\n  return Math.round(d);\n};\n","import React, { useState, useEffect } from 'react';\nimport { List, Avatar } from 'antd';\nimport { Pagination } from 'antd';\nimport styles from './ItemsList.module.css';\nimport { ListInterface, ListItem } from './types';\nimport { getDistanceFromLatLonInKm } from './utils';\n\nconst header = 'Robots';\nconst DEFAULT_CURRENT_PAGE = 1;\nconst ITEMS_PER_PAGE = 10;\n\nexport const ItemsList: React.FC<ListInterface> = ({\n  list,\n  currentPosition,\n  setMarkersOnListChange,\n  setActiveMarkerOnHover,\n}) => {\n  const [renderedList, setRenderedList] = useState<ListItem[]>([]);\n  const [currentPage, setCurrentPage] = useState(DEFAULT_CURRENT_PAGE);\n\n  const changeMarkersAfterListChanged = () => {\n    const listPart = list.slice((currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE);\n\n    const listPartWithDistances = listPart.map((item) => {\n      return currentPosition\n        ? {\n            ...item,\n            distance: getDistanceFromLatLonInKm(item.lat, item.lng, currentPosition.lat, currentPosition.lng),\n          }\n        : item;\n    });\n    setRenderedList(listPartWithDistances);\n    setMarkersOnListChange(listPartWithDistances);\n  };\n\n  useEffect(() => {\n    changeMarkersAfterListChanged();\n  }, [currentPage, currentPosition]);\n\n  useEffect(() => {\n    setCurrentPage(DEFAULT_CURRENT_PAGE);\n    changeMarkersAfterListChanged();\n  }, [list]);\n\n  return (\n    <div>\n      <h2>{header}</h2>\n      <Pagination\n        defaultCurrent={1}\n        current={currentPage}\n        total={list.length}\n        onChange={(currentPage) => setCurrentPage(currentPage)}\n        pageSize={10}\n        showSizeChanger={false}\n      />\n      <List\n        className={styles.list}\n        itemLayout=\"horizontal\"\n        dataSource={renderedList}\n        renderItem={(item) => (\n          <List.Item onMouseOver={() => setActiveMarkerOnHover(item)} onMouseLeave={() => setActiveMarkerOnHover(null)}>\n            <List.Item.Meta avatar={<Avatar src={item.avatar} />} />\n            <div className={styles.info}>\n              <div className={styles.name}>\n                <p> {`${item.first_name} ${item.last_name}`}</p>\n              </div>\n              {currentPosition && (\n                <div>\n                  <p>{`${item.distance} km`}</p>\n                </div>\n              )}\n            </div>\n          </List.Item>\n        )}\n      />\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { GoogleMap } from './components/GoogleMap';\nimport { ItemsList } from './components/ItemsList';\nimport { Layout } from 'antd';\nimport styles from './App.module.css';\nimport { ListItem } from './components/ItemsList/types';\nimport { Coordinates } from './components/GoogleMap/types';\nimport 'antd/dist/antd.css';\n\nconst title = 'Maps';\n\nconst App: React.FC = () => {\n  const { Header, Sider, Content } = Layout;\n\n  const [list, setList] = useState<ListItem[]>([]);\n  const [markers, setMarkers] = useState<ListItem[]>([]);\n  const [currentPosition, setCurrentPosition] = useState<Coordinates | null>(null);\n  const [activeMarker, setActiveMarker] = useState<number | null>(null);\n\n  const gotPositionSuccessfully = (pos: any) => {\n    const { latitude, longitude } = pos.coords;\n    setCurrentPosition({ lat: latitude, lng: longitude });\n  };\n\n  useEffect(() => {\n    navigator.geolocation.getCurrentPosition(gotPositionSuccessfully);\n  }, []);\n\n  const setListOnBoundsChanged = (markers: ListItem[]) => {\n    setList(markers);\n  };\n\n  const setMarkersOnListChange = (robots: ListItem[]) => {\n    setMarkers(robots);\n  };\n\n  const setActiveMarkerOnListItemHover = (item: ListItem | null) => {\n    if (item) {\n      setActiveMarker(item.id);\n    } else {\n      setActiveMarker(null);\n    }\n  };\n\n  return (\n    <Layout className={styles.layout}>\n      <Header className={styles.header}>\n        <h1>{title}</h1>\n      </Header>\n      <Layout>\n        <Content>\n          <GoogleMap\n            setListOnBoundsChanged={setListOnBoundsChanged}\n            markers={markers}\n            currentPosition={currentPosition}\n            activeMarker={activeMarker}\n          />\n        </Content>\n        <Sider width=\"25%\" className={styles.sider} theme=\"light\">\n          <ItemsList\n            list={list}\n            setMarkersOnListChange={setMarkersOnListChange}\n            currentPosition={currentPosition}\n            setActiveMarkerOnHover={setActiveMarkerOnListItemHover}\n          />\n        </Sider>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ItemsList_list__16cwe\",\"info\":\"ItemsList_info__1Hl3g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"App_layout__1LipR\",\"header\":\"App_header__3ZZ1n\",\"sider\":\"App_sider__3ZkIN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marker\":\"Marker_marker__1Msl5\",\"activeMarker\":\"Marker_activeMarker__2lhXy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"GoogleMap_map__2ZCES\",\"checkbox\":\"GoogleMap_checkbox__2Thew\"};"],"sourceRoot":""}